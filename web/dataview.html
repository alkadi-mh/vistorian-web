<!DOCTYPE html>
<html>

<head>
    <meta content="text/html; charset=UTF-8; X-Content-Type-Options=nosniff" http-equiv="Content-Type" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <title>Data view</title>
    <!-- VS: Call to trace.js -->
    <script type="text/javascript" src="../static/traces/trace.js"></script>

    <link rel="stylesheet" type="text/css" href="./static/styles.css" />
    <link rel="stylesheet" type="text/css" href="./static/dataview_styles.css" />
    <link rel="stylesheet" type="text/css" href="./static/tablestyle.css" />
    <link rel="stylesheet" href="./static/jquery-ui.css">
    
    <link href="https://fonts.googleapis.com/css?family=Poiret+One" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans" rel="stylesheet">
    
    <script src="../node_modules/jquery/dist/jquery.js" type="text/javascript"></script>
    <script src="./static/jquery-ui.js"></script>
    <script src="../node_modules/vistorian-core/lib/vistorian-core.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="bookmarkLogConsent.css">
    <script src='bookmarkLogConsent.js'></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
   
</head>

<body onload="trace.event('log', 'start', 'webpage', document.location.pathname);checkLogStatus();dragElement(document.getElementById('mydiv'));" onerror="trace.event('err', event + ' ' + source + lineno, error, document.location.pathname);"  onbeforeunload="trace.event('log_12', 'close', 'webpage', document.location.pathname);" onfocus="refreshBookmarkToolbar();">
    <!-- VS: Call to trace_test_130529 -->
    <script type="text/javascript" src="../static/traces/trace_test_130529.js"></script>

    <table id="main">
        <tr id="firstRow">
            <td id="menu">
                <a href="../index.html"><img width="100%" src="../static/logos/logo-networkcube.png" /></a>
                <p id="intro">
                    This is your data view. Below you find a list of visualizations and the
                    networks currently in your browser.
                </p>
                <p >
                    <h6><strong>Try Bookmarks now!</strong> </h6>
                </p>
                <div class="onoffswitch"> 
                    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="consentOnoffswitch"  tabindex="0" onchange="trace.event('log_5', 'Bookmark_Consent_Display', 'Consent_button', this.checked);toggleConsntModel();" > 
                    <label class="onoffswitch-label" for="consentOnoffswitch">
                        <span class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                    </label>
                </div>
            </td>
            <td>
                <div id="visualizationListDiv">
                    <ul id="visualizationList" class="nointent"></ul>
                </div>
            </td>
        </tr>
        <tr>
            <td id="lists">

                <div id="networkListDiv">
                    <h2>
                        Networks
                        <input type="button" class="menuButton hastooltip" value="New" onclick="window.exports.networkcube.dataview.createNetwork();trace.event('dat_1', 'data view', 'new network', 'created')"
                            title="Create new network from one or more tables." />
                    </h2>
                    <ul id="networkList" class="nointent"></ul>
                </div>
                <br />
                <div id="tableListDiv">
                    <h2>
                        Data Tables
                        <input id="files" type="file" name="file" class="inputfile" value="Upload" name="files[]"
                            data-multiple-caption="{count} files selected" multiple onchange="trace.event('dat_2_DT', 'data view', 'DataTables_FileUpload', 'new file upload')"/>
                        <label for="files" class="menuButton hastooltip" title="Upload a new table in CSV file.">
                            Upload
                        </label>
                    </h2>
                    <ul id="tableList" class="nointent"></ul>
                </div>

                <div>
                    <input id="clearCacheButton" type="button" class=" hastooltip" value="Empty browser cache"
                        title="This will remove ALL your networks and tables from your browser cache. FOREVER. Use this function if your browser is not repsponding anymore. "
                        onclick="window.exports.networkcube.dataview.clearCache();trace.event('dat_5','data view','browser cache','cleared')"></button>
                </div>
            </td>


            <td id="center">

                <div id="networkTables" style="display:none;">

                    <div id="networkInfoDiv">
                        <h2>Network
                            <input id="saveNetworkButton" class="tableMenuButton" type="button" value="Save Network"
                                onclick="window.exports.networkcube.dataview.saveCurrentNetwork(false);trace.event('dat_17', 'data view', 'network', 'saved')" />
                            <input id="deleteNetworkButton" class="tableMenuButton" type="button" value="Delete Network"
                                onclick="window.exports.networkcube.dataview.deleteCurrentNetwork();trace.event('dat_6', 'data view', 'network', 'deleted')" />
                        </h2>
                        <p>Name: <input id="networknameInput" type="text" size="50" onchange="trace.event('dat_9', 'data view', 'network name', 'updated')"/>
                        </p>
                        <p id="networkStatus"></p>
                    </div>

                    <!-- Show Node table here -->
                    <div id="nodeTableContainer">
                        <div class="title">
                            <p>
                                <h3>Node Table</h3>
                                <p><i>A node table describes the nodes in the network. That means that each row in the
                                        node table describes a node and its relations, or attributes.</i></p>
                            </p>
                            Select a previously uploaded node table from the list: <select id="nodetableSelect"
                                onchange="window.exports.networkcube.dataview.setNodeTable(this);trace.event('dat_3_NT', 'data view', 'NodeTable_select', ' NT selected')">
                                <option value="---">---</option>
                            </select>
                            or <input id="nodeTableUpload" type="file" name="file" class="inputfile" value="Upload"
                                name="files[]" data-multiple-caption="{count} files selected" onchange="trace.event('dat_2_NT', 'data view', 'NodeTable_FileUpload', 'new NT file upload')"/>
                            <label for="nodeTableUpload" class="menuButton hastooltip"
                                title="Upload a new table in CSV file.">
                                Upload new node table
                            </label>

                        </div>

                        <!-- Table content goes here:  -->
                        <div id="nodeTableDiv" class="tableDiv">

                        </div>
                    </div>

                    <!-- Show link table here -->
                    <div id="linkTableContainer">
                        <div class="title">
                            <p>
                                <h3>Link Table</h3>
                                <p><i>A link table describes the links in a network. That means that each row describes
                                        a link with at least a source and target. Optional attributes include time, link
                                        type, link weight, and locations of source and target nodes while connected
                                        through this link.</i></p>
                            </p>
                            Select a previously uploaded link table from the list: <select id="linktableSelect" 
                                onchange="window.exports.networkcube.dataview.setLinkTable(this);trace.event('dat_3_LK', 'data view', 'LinkTable_select', ' LK selected')">
                                <option value="---">---</option>
                            </select>
                            or <input id="linkTableUpload" type="file" name="file" class="inputfile" value="Upload"
                                name="files[]" data-multiple-caption="{count} files selected" onchange="trace.event('dat_2_LK', 'data view', 'LinkTable_FileUpload', 'new LK file upload')"/>
                            <label for="linkTableUpload" class="menuButton hastooltip"
                                title="Upload a new table in CSV file.">
                                Upload new link table
                            </label>
                            <p>
                                <input type="checkbox" name="directedCheckbox" onclick="window.exports.networkcube.dataview.directedCheckboxClick();trace.event('dat_12', 'data view', 'directed checkbox', this.checked)">Directed
                            </p>
                        </div>
                        <div id="linkTableDiv" class="tableDiv"></div>
                    </div>

                    <!-- Show location table here -->
                    <div id="locationTableContainer">
                        <div class="title">
                            <p>
                                <h3>Location Table</h3>
                                <p><i>A location table describes coordinates of places mentioned in the link table.</i>
                                </p>
                            </p>
                            Select a previously uploaded location table from the list: <select id="locationtableSelect"
                                onchange="window.exports.networkcube.dataview.setLocationTable(this);trace.event('dat_3_LO', 'data view', 'LocationTable_select', ' LO selected')">
                                <option value="---">---</option>
                            </select>
                            or
                            <button class="menuButton" onclick="window.exports.networkcube.dataview.extractLocations();trace.event('dat_14', 'data view', 'extract locations', 'clicked')">Extract locations from node and link
                                tables</button>
                            <button class="menuButton" onclick="window.exports.networkcube.dataview.updateLocations();trace.event('dat_13', 'data view', 'update Locations coordinates', 'clicked')">Update location coordinates</button>
                        </div>

                        <div id="locationTableDiv" class="tableDiv"></div>
                    </div>
                </div>

                <div id="individualTables" style="display:none;">
                    <div id="tableInfoDiv">
                        <input id="deleteTableButton" type="button" value="Delete" onclick="window.exports.networkcube.dataview.deleteCurrentTable();" />
                        </p>
                    </div>
                    <div id="individualTable"></div>
                </div>
            </td>
        </tr>
    </table>



    <div id="footer">
        <a class="footer" href="mailto:networkcube@microsoft.com" target="_top">Contact Us</a> |
        <a class="footer" href="https://go.microsoft.com/fwlink/?LinkId=521839" title="privacy">Privacy & Cookies</a> |
        <a class="footer" href="https://go.microsoft.com/fwlink/?LinkID=760869" title="terms of use">Terms Of Use</a> |
        <a class="footer" href="http://go.microsoft.com/fwlink/?LinkId=506942" title="trademarks">Trademarks</a>
        © <script>document.write(new Date().getFullYear())</script> Microsoft <img src="../static/logos/logo-microsoft.png" height="20px"> © <script>(document.write(new Date().getFullYear()));</script> INRIA <img
            src="../static/logos/logo-inria.png" height="20px">
    </div>



    <script type="text/javascript" charset="utf8" src="DataTables-1.10.7/media/js/jquery.dataTables.js"></script>
    <script src="../node_modules/jstorage/jstorage.js"></script>
    
       
    <script> var exports = {}; </script>
    <script src="../lib/vistorian-vis.js"></script>

    <!-- VER ESTO -->
    <script>


        // Hack to make upload button look nice: 
        // from: http://tympanus.net/codrops/2015/09/15/styling-customizing-file-inputs-smart-way/

        'use strict';

        $(document).tooltip();

        ;(function (document, window, index) {

            var inputs = document.querySelectorAll('.inputfile');
            Array.prototype.forEach.call(inputs, function (input) {
                var label = input.nextElementSibling,
                    labelVal = label.innerHTML;

                input.addEventListener('change', function (e) {
                    var fileName = '';
                    if (this.files && this.files.length > 1)
                        fileName = (this.getAttribute('data-multiple-caption') || '').replace('{count}', this.files.length);
                    else
                        fileName = e.target.value.split('\\').pop();

                });

                // Firefox bug fix
                input.addEventListener('focus', function () { input.classList.add('has-focus'); });
                input.addEventListener('blur', function () { input.classList.remove('has-focus'); });
            });
        }(document, window, 0));


    </script>
       <div id="mydiv" >
        <div id="mydivheader" ><strong> Bookmarks</strong> (Click header to move)
            <button type="button" class="close"  onclick="turnLoggingOff()">&nbsp;×&nbsp;</button>
            <button type="button" class="close"  onclick="maxmizeBookmarks();">&nbsp;&nbsp;<i class="fa fa-window-maximize" style="font-size:12px"></i></button>

            <button type="button" class="close"  onclick="minimizeBookmarks();">&nbsp;&nbsp;<i class="fa fa-window-minimize" style="font-size:12px"></i></button>
        </div>
      
    
        <iframe id="myFrame" src="logbook.html" ></iframe>
        </div>
    
        <div class="container">
            
        <!-- The Modal -->
        <div class="modal" id="myModal">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
            
            <!-- Modal Header -->
            <div class="modal-header">
                <h1 class="modal-title">Enabling Vistorian Bookmarks Tool</h1>
                <button type="button" class="close" data-dismiss="modal" onclick="turnLoggingOff()">×</button>
            </div>
            
            <!-- Modal body -->
            <div class="modal-body" style="text-align: justify;">
                <h3>Vistorian Logging Consent Form</h3>
                <br>   

                <p>The bookmark feature allows you to capture and restore the state of your exploration at any time and to leave notes with each bookmark. </p>
                <p>The Vistorian is a research prototype to build better visualizations for multivariate networks, and it is essential that we understand how people use the many interaction and visualization features of the Vistorian. By enabling the bookmark function, you will be agreeing to the terms and conditions below and enable anonymous logging of  your interactions.</p>
                <p>For more information about our research and publications visit our <a href="https://github.com/alkadi-mh/vistorian-web/wiki/Vistorian-Activity-Logging-Study">wiki</a> and you can learn more about Vistorian by clicking <a href="https://github.com/networkcube/vistorian/wiki">here</a>. To send questions, feedback or suggestions for improvement email us at: <a href="mailto:vistorian@inria.fr">vistorian@inria.fr</a> </p>
                <p>If you agree to be logged, we will  anonymously log how you use the Vistorian, such as the fact that you have opened a node link diagram or a matrix visualization; the fact that you have used an interactive filter on your data, or the fact that you have uploaded of a new data file. For the list of the events being logged see: wiki . The anonymous logged events will be saved on a secure server which is accessible only by the Vistorian team.</p>
                <p>To relate logged events to the same user, the Vistorian will create a unique random ID for you in your browser cache, independent from your IP address and other potentially identifiable personal information. No cookies are used and emptying your browser cache will erase your ID. </p>
                <p>No personal information will be collected or saved within the logging data. For example we do not log or transmit any of your research data onto our server. I.e., the data you explore remains only on your computer and no information about these data or pictures of the visualizations you create will be logged.</p>
                <p><ul>If you agree to your interactions being logged:
                <li>You will activate the bookmarks feature and will be able to bookmark your visualizations, write your own work notes.</li>
                <li>Interactions will anonymously be logged for improvement purposes and our research.</li> 
                <li>You can also contact us by email to book a consultation with our visualization experts to help you with the Vistorian. </li>
                </ul> </p>
                You can stop the logging at any time by turning OFF the bookmark feature. </p>
                If you wish your data to be removed from the server please email vistorian@inria.fr. Please include the URL of your last Vistorian session -which includes your ID.</p>

                    
                <p>Thank you for agreeing to participate in our research.</p>
                <p><b>The Vistorian Team</b></p>
            </div>
            <!-- Modal footer -->
            <div class="modal-footer">
               
                <label for="chk_dontShowConsent">  <input type="checkbox" id="chk_dontShowConsent"> Don't show consent-approval again.</label>
                <a href="/static/logging_consent/Vistorian Tracing Consent form .pdf" download> <button type="button" class="btn btn-link" onclick="trace.event('log_7', 'consent', 'downloaded', document.location.pathname);">Download Consent</button></a>

                <div >  
                <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="turnLoggingOff()">Disable</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="turnOnLogging()">Enable Bookmark Tool</button>
                </div>
                    
                    
            </div>
            
            
        </div>
        </div>
        
    </div>
</div>
    <div class="feedback">
        <a href="#"><span>👋</span></a>
        <div class="form">
          <form>
            <h6>How can you describe your expirence? </h6>
            <div class="form-group">
                <input type="button" class="menuButtonGadget" id="AnalyzeData" value="Analyzing Data" >
                <input type="button" class="menuButtonGadget" id="Learn" value="Learning" >
                <input type="button" class="menuButtonGadget" id="DemotoOthers" value="Demoing" >
                <input type="button" class="menuButtonGadget" id="exploreVis" value="Exploring" >
                <input type="button" class="menuButtonGadget" id="ReportIssue" value="Reporting an Issue" >
                <input type="button" class="menuButtonGadget" id="AskForHelp" value="Asking for help" >
                <input type="button" class="menuButtonGadget" id="eurekaMoment" value="Eureka! ">

  
                <textarea name="message" id="feedback_text" cols="30" rows="10" placeholder="Send us your feedback!"autofocus></textarea>
              
            </div>
            <button type="submit" class="btn btn-primary btn-sm btn-block" onclick="LoggingGeneralFeedback();">
              Send it!
            </button>
          </form>
        </div>
        <div class="thanks">
          Feedback sent! Thank you for helping us!
        </div>
      </div>

 <!-- Feedback Modal -->
 <div class="modal fade show" id="popupFeedbackForm" >
    <div class="modal-dialog modal-dialog-scrollable">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Let us know: How are you using Vistorian? </h5>
          <button type="button" class="close" data-dismiss="modal" onclick="userActivityThrottler();resetFeedbackForm();trace.event('log_15', 'general_feedback_popupForm', 'closed', document.location.pathname);">&times;</button>
        </div>
        <div class="modal-body">
          <form style="font-size: 14px;" id="FeedbackFormElements">
            <div style="margin: 5px;">
                <h6 style="font-weight: bold;font-style: italic;"><u>How can you charactarize your current activity?</u></h6>

                <input type="button" class="feedbackMenuButton" style="margin: 2px;" id="btn_AnalyzeData" value="Analyzing Data" onclick="displaySubOptions(this);">
                <input type="button" class="feedbackMenuButton" style="margin: 2px;" id="btn_Learn" value="Learning" onclick="displaySubOptions(this);">
                <input type="button" class="feedbackMenuButton" style="margin: 2px;" id="btn_DemotoOthers" value="Demoing" onclick="displaySubOptions(this);">
                <input type="button" class="feedbackMenuButton" style="margin: 2px;" id="btn_exploreVis" value="Exploring" onclick="displaySubOptions(this);">
                <input type="button" class="feedbackMenuButton" style="margin: 2px;" id="btn_ReportIssue" value="Reporting an Issue" onclick="displaySubOptions(this);">
                <input type="button" class="feedbackMenuButton" style="margin: 2px;" id="btn_AskForHelp" value="Asking for help" onclick="displaySubOptions(this);">
                <input type="button" class="feedbackMenuButton" style="margin: 2px;" id="btn_eurekaMoment" value="Eureka!" onclick="displaySubOptions(this);">
                <input type="button" class="feedbackMenuButton" style="margin: 2px;" id="btn_other" value="Other" onclick="displaySubOptions(this);">
                <br/>
                <div id="OtherType_div" style="display: none; align-items: center;margin: 10px;">
                    <strong>Specify other usage: </strong> <input type="tex" id="txt_other" cols="60" placeholder="Explian other type here .. Please don't add personal information";>
                </div>
                <br/>
                <div id="checkboxes_group_div" style="display: none; align-items: center;margin: 10px;">
                    <h6 style="font-weight: bold;font-style: italic;"><u> What kind of analysis are you performing?</u></h6>

                    <label for="chk_0"><input type="checkbox" name="chks_feebackForm" id="chk_0" value="0"> Review Data Quality</label><br>
                    <label for="chk_1"><input type="checkbox" name="chks_feebackForm" id="chk_1" value="1"> Test a particular hypothesis</label><br>
                    <label for="chk_2"><input type="checkbox" name="chks_feebackForm" id="chk_2" value="2"> Compare different visualizations</label><br>
                    <label for="chk_3"><input type="checkbox" name="chks_feebackForm" id="chk_3" value="3"> Test & Explore Vistorian</label><br>
                    <label for="chk_4"><input type="checkbox" name="chks_feebackForm" id="chk_4" value="4"> Retrieve specific details</label><br>
                    <label for="chk_5"><input type="checkbox" name="chks_feebackForm" id="chk_5" value="5"> Repeat analysis with new data</label><br>

                </div>
                <div id="writtenFeedback" style="margin: 5px;">
                     <textarea name="message" id="feedback_text_popup" cols="40" rows="5" placeholder="Write your feedback!"autofocus></textarea>
                </div>
            </div>
         
     
          </form>
        </div>
        <div class="modal-footer"> 
            <div style="float: left;">         
            <label for="chk_hidePopupW"><input type="checkbox" id="chk_hidePopupW" value="1">Don't show this form again.</label><br>
            </div>
            <div>
           <button type="button" class="btn btn-default" data-dismiss="modal" onclick="disablingFeedbackPopup(document.getElementById('chk_hidePopupW'));trace.event('log_16', 'general_feedback_popupForm', 'feedback form hidden', document.location.pathname);">Hide this form</button>   

           <button type="button" class="btn btn-default" data-dismiss="modal" onclick="LoggingFeedback();disablingFeedbackPopup(document.getElementById('chk_hidePopupW'));">Submit my feedback</button>
        </div>
        </div>
      </div>
      
    </div>
  </div> 


</body>
</html>



